services:
  gmail-r2-backup:
    build: .
    command: ["sleep", "infinity"]
    environment:
      # Set these in Coolify (recommended) or via a local .env file.
      - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
      - AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
      - R2_BUCKET=${R2_BUCKET}
      - R2_ENDPOINT_URL=${R2_ENDPOINT_URL}
      - R2_REGION=${R2_REGION:-auto}
      # IMPORTANT: do not set R2_PREFIX if you plan to use --auto-prefix for multiple accounts.
    volumes:
      - gmail-r2-backup-state:/state

volumes:
  gmail-r2-backup-state:

